<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    
    <script>
        L_NO_TOUCH = false;
        L_DISABLE_3D = false;
    </script>

    <style>html, body {width: 100%; height: 100%; margin: 0; padding: 0;}</style>
    <style>#map {position: absolute; top: 0; bottom: 0; right: 0; left: 0;}</style>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    
    <style>
        #map_b0fccaba84a836b396c4eb71460b96c8 {
            position: relative;
            width: 100.0%;
            height: 100.0%;
            left: 0.0%;
            top: 0.0%;
        }
        .leaflet-container { font-size: 1rem; }
    </style>
</head>
<body>
    <div class="folium-map" id="map_b0fccaba84a836b396c4eb71460b96c8"></div>

    <script>
        var map_b0fccaba84a836b396c4eb71460b96c8 = L.map(
            "map_b0fccaba84a836b396c4eb71460b96c8",
            {
                center: [40.7128, -74.006],
                crs: L.CRS.EPSG3857,
                zoom: 14,
                zoomControl: true,
                preferCanvas: false,
            }
        );

        var tile_layer_5dbea41c2fd05c3f5eb9822d46ab708e = L.tileLayer(
            "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
            {"attribution": "Data by \u0026copy; \u003ca target=\"_blank\" href=\"http://openstreetmap.org\"\u003eOpenStreetMap\u003c/a\u003e, under \u003ca target=\"_blank\" href=\"http://www.openstreetmap.org/copyright\"\u003eODbL\u003c/a\u003e.", "detectRetina": false, "maxNativeZoom": 18, "maxZoom": 18, "minZoom": 0, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false}
        );
        tile_layer_5dbea41c2fd05c3f5eb9822d46ab708e.addTo(map_b0fccaba84a836b396c4eb71460b96c8);

        navigator.geolocation.getCurrentPosition(function (position) {
            var userLat = position.coords.latitude;
            var userLng = position.coords.longitude;

            var userMarker = L.marker([userLat, userLng]).addTo(map_b0fccaba84a836b396c4eb71460b96c8);
            var userPopup = L.popup().setContent("Your Location");
            userMarker.bindPopup(userPopup).openPopup();

            map_b0fccaba84a836b396c4eb71460b96c8.setView([userLat, userLng], 14);

            var servicePersons = [
                { name: "John Doe", contact: "123-456-7890", lat: 40.7127, lng: -74.0059 },
                { name: "Jane Smith", contact: "987-654-3210", lat: 40.713, lng: -74.0055 },
                { name: "Bob Johnson", contact: "555-123-4567", lat: 40.7118, lng: -74.005 }
            ];

            servicePersons.forEach(function (person) {
                var serviceMarker = L.marker([person.lat, person.lng]).addTo(map_b0fccaba84a836b396c4eb71460b96c8);
                var servicePopupContent = "Name: " + person.name + "<br>Contact: " + person.contact;
                var servicePopup = L.popup().setContent(servicePopupContent);
                serviceMarker.bindPopup(servicePopup);
            });
        });
    </script>
</body>
</html>
